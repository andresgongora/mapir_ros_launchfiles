<!--
################################################################
#															  #
#		ROS Gas dispersion Player							  #
#						   								   #
################################################################
-->
<launch>
	### GLOBAL VARS ###
	# GASES: ethanol=0; methane=1; hydrogen=2; propanol=3; chlorine=4; flurorine=5; acetone=6; neon=7; helium=8; hot air=9
	# SENSORS: TGS2620=0, TGS2600=1, TGS2611=2 
	<arg name="FixedFrame" default="/map" />
	
	
	### NODE environment (for RVIZ visualization) ###
	#------------------------------------------------
	<node pkg="environment" type="environment" name="environment_player" output="screen">		
		<param name="/fixed_frame" value="$(arg FixedFrame)"/>

		#Sources
		<param name="/number_of_sources" value="7"/>	
		<param name="/source_0_position_x" value="-2.5"/>
		<param name="/source_0_position_y" value="-3.0"/>
		<param name="/source_0_position_z" value="1"/>
		
  		<param name="/source_1_position_x" value="2.5"/>
		<param name="/source_1_position_y" value="-3.0"/>
		<param name="/source_1_position_z" value="1"/>
		
   		<param name="/source_2_position_x" value="0.5"/>
		<param name="/source_2_position_y" value="-1.5"/>
		<param name="/source_2_position_z" value="1"/>
		
   		<param name="/source_3_position_x" value="1.5"/>
		<param name="/source_3_position_y" value="0.5"/>
		<param name="/source_3_position_z" value="1"/>
		
   		<param name="/source_4_position_x" value="-4"/>
		<param name="/source_4_position_y" value="2"/>
		<param name="/source_4_position_z" value="1"/>
		
   		<param name="/source_5_position_x" value="-0.5"/>
		<param name="/source_5_position_y" value="3.5"/>
		<param name="/source_5_position_z" value="1"/>
		
   		<param name="/source_6_position_x" value="4"/>
		<param name="/source_6_position_y" value="5"/>
		<param name="/source_6_position_z" value="1"/>
		
		#CAD and occupancy
		<param name="/occupancy3D_data" value="/home/andy/Software/source/ros/dataset/gas_simulator/OccupancyGrid3D_W1.csv" />
		<param name="/number_of_CAD" value="5"/>
		<param name="/CAD_0" value="package://environment/CADmodels/MAPIRlab_furniture/MAPIRlab_furniture_walls_cad_model.dae"/>
		<param name="/CAD_1" value="package://environment/CADmodels/MAPIRlab_furniture/MAPIRlab_furniture_windows_cad_model.dae"/>
		<param name="/CAD_2" value="package://environment/CADmodels/MAPIRlab_furniture/MAPIRlab_furniture_doors_cad_model.dae"/>
		<param name="/CAD_3" value="package://environment/CADmodels/MAPIRlab_furniture/MAPIRlab_furniture_tables_big_cad_model.dae"/>
		<param name="/CAD_4" value="package://environment/CADmodels/MAPIRlab_furniture/MAPIRlab_furniture_wardrobes_cad_model.dae"/>
	</node>




	### Player ###
	#-------------
	<node pkg="simulation_player" type="simulation_player" name="simulation_player" output="screen">
		<param name="/player_freq" 		value="1" />		###(Hz) Freq for loading the simulation log_files				
		<param name="/num_simulators" 		value="1" />		### Number of simulations to load (useful for multiple sources and gases)
		<param name="/initial_iteration"	value="100"/>
		<param name="/simulation_data_0"	value="/datos/tmp/Datasets/W1C/FilamentSimulation_gasType_0_sourcePosition_0.50_-1.50_1.00_iteration_" />
	</node>
  
   
   
	### Gas Sensor simulated nodes ###
	#---------------------------------
	# SENSOR MODELS: 
	# MOX: TGS2620=0, TGS2600=1, TGS2611=2
	# PID: MiniRaeLite=30
	<node pkg="tf" type="static_transform_publisher" name="mox0_broadcaster" args="0 0 1 0 0 0 base_link mox0_frame 100" />
	<node pkg="tf" type="static_transform_publisher" name="mox1_broadcaster" args="0 0 1 0 0 0 base_link mox1_frame 100" />
	<node pkg="tf" type="static_transform_publisher" name="mox2_broadcaster" args="0 0 1 0 0 0 base_link mox2_frame 100" />
	<node pkg="tf" type="static_transform_publisher" name="pid_broadcaster" args="0 0 1 0 0 0 base_link pid_frame 100" />
<!--
	<group ns="Mox00">
		<node pkg="simulated_gas_sensor" type="simulated_gas_sensor" name="fake_mox" output="screen">
			<param name="/sensor_model" value="0" />
			<param name="/sensor_frame" value="mox0_frame" />
			<param name="/fixed_frame" value="$(arg FixedFrame)"/>
		</node>		
	</group> 
	
	<group ns="Mox01">
		<node pkg="simulated_gas_sensor" type="simulated_gas_sensor" name="fake_mox" output="screen">
			<param name="/sensor_model" value="1" />
			<param name="/sensor_frame" value="mox1_frame" />
			<param name="/fixed_frame" value="$(arg FixedFrame)"/>			
		</node>
	</group> 

	<group ns="Mox02">
		<node pkg="simulated_gas_sensor" type="simulated_gas_sensor" name="fake_mox" output="screen">
			<param name="/sensor_model" value="2" />
			<param name="/sensor_frame" value="mox2_frame" />
			<param name="/fixed_frame" value="$(arg FixedFrame)"/>			
		</node>
	</group>
-->
	<group ns="PID">
		<node pkg="simulated_gas_sensor" type="simulated_gas_sensor" name="fake_pid" output="screen">
			<param name="/sensor_model" value="30" />
			<param name="/sensor_frame" value="pid_frame" />
			<param name="/fixed_frame" value="$(arg FixedFrame)"/>			
		</node>
	</group>

	### Wind Sensor simulated nodes ###
	#---------------------------------
	<node pkg="tf" type="static_transform_publisher" name="anemometer_broadcaster" args="0 0 1 0 0 0 base_link anemometer_frame 100" />   
	<group ns="Anemometer01">
		<node pkg="simulated_anemometer" type="simulated_anemometer" name="fake_anemometer" output="screen">			
			<param name="/sensor_frame" 	value="anemometer_frame" />
			<param name="/fixed_frame" 	value="$(arg FixedFrame)"/>
			<param name="noise_std"		value="0.08"/>
		</node>
	</group> 

	   
	### RQT PLOT Sensors ###
	<!--<node pkg="rqt_plot" type="rqt_plot" name="rqt_plot"  args="/Mox00/Sensor_reading/raw /Mox01/Sensor_reading/raw /Mox02/Sensor_reading/raw /Mox01/predicted_reading/raw"/> -->

</launch>
